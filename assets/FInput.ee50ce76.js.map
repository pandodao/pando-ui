{"version":3,"file":"FInput.ee50ce76.js","sources":["../../packages/uikit/src/utils/number.ts","../../packages/uikit/src/components/FInput/FInput.tsx"],"sourcesContent":["import BigNumber from \"bignumber.js\";\n\nexport function numberInput(value: string, precision: number | string) {\n  const str = value.replace(/\\,/g, \".\");\n  const num = new BigNumber(str);\n\n  if (num.isNaN()) {\n    return \"\";\n  }\n\n  const dp = num.decimalPlaces();\n\n  if (dp && dp > +precision) {\n    return num\n      .decimalPlaces(+precision, BigNumber.ROUND_DOWN)\n      .toFixed(+precision);\n  }\n\n  return str;\n}\n","import { defineComponent, ref } from \"vue\";\nimport { VTextField } from \"vuetify/components\";\nimport { numberInput } from \"../../utils/number\";\n\nimport \"./FInput.scss\";\n\nexport const FInput = defineComponent({\n  name: \"FInput\",\n\n  props: {\n    modelValue: { type: String, default: \"\" },\n    precision: { type: [Number, String] },\n    isNumber: { type: Boolean, default: false },\n    hideDefaultMessages: Boolean,\n  },\n\n  emits: {\n    \"update:modelValue\": (value) => true,\n  },\n\n  setup(props, { attrs, emit, slots }) {\n    const inputRef = ref<typeof VTextField>();\n    const focused = ref(false);\n    const preset = { density: \"comfortable\" as const };\n\n    const handleChange = (value) => {\n      if (props.isNumber && props.precision !== undefined) {\n        let formated = numberInput(value, props.precision);\n\n        if (props.precision === 0 && formated.endsWith(\".\")) {\n          formated = formated.slice(0, -1);\n        }\n\n        emit(\"update:modelValue\", formated);\n        inputRef?.value?.$forceUpdate();\n\n        return;\n      }\n\n      emit(\"update:modelValue\", value);\n    };\n\n    const handleKeydown = (e: KeyboardEvent) => {\n      if (props.isNumber) {\n        if ([\"e\", \"+\", \"-\"].includes(e.key)) {\n          e.preventDefault();\n        }\n      }\n    };\n\n    return () => (\n      <VTextField\n        ref={inputRef}\n        v-model:focused={focused.value}\n        class={[\n          \"f-input\",\n          { \"f-input--hide-default-messages\": props.hideDefaultMessages },\n          { \"f-input--focused\": focused.value },\n        ]}\n        modelValue={props.modelValue}\n        onUpdate:modelValue={handleChange}\n        onKeydown={handleKeydown}\n        {...preset}\n      >\n        {{\n          ...slots,\n          details: slots.tools\n            ? (slotProps) => {\n                return (\n                  <div class=\"f-input__tools\">{slots.tools?.(slotProps)}</div>\n                );\n              }\n            : slots.details,\n        }}\n      </VTextField>\n    );\n  },\n});\n"],"names":["numberInput","value","precision","str","num","BigNumber","dp","__name","FInput","defineComponent","name","props","modelValue","type","String","default","Number","isNumber","Boolean","hideDefaultMessages","emits","setup","attrs","emit","slots","inputRef","ref","focused","preset","density","handleChange","undefined","formated","endsWith","slice","$forceUpdate","handleKeydown","e","includes","key","preventDefault","_createVNode","VTextField","_mergeProps","$event","details","tools","slotProps"],"mappings":"0OAEgB,SAAAA,EAAYC,EAAeC,EAA4B,CACrE,MAAMC,EAAMF,EAAM,QAAQ,MAAO,GAAG,EAC9BG,EAAM,IAAIC,EAAUF,CAAG,EAEzB,GAAAC,EAAI,QACC,MAAA,GAGH,MAAAE,EAAKF,EAAI,gBAEX,OAAAE,GAAMA,EAAK,CAACJ,EACPE,EACJ,cAAc,CAACF,EAAWG,EAAU,UAAU,EAC9C,QAAQ,CAACH,CAAS,EAGhBC,CACT,CAjBgBI,EAAAP,EAAA,eCIHQ,MAAAA,EAASC,EAAgB,CACpCC,KAAM,SAENC,MAAO,CACLC,WAAY,CAAEC,KAAMC,OAAQC,QAAS,EAAI,EACzCb,UAAW,CAAEW,KAAM,CAACG,OAAQF,MAAM,CAAG,EACrCG,SAAU,CAAEJ,KAAMK,QAASH,QAAS,EAAO,EAC3CI,oBAAqBD,OACtB,EAEDE,MAAO,CACL,oBAAsBnB,GAAU,EACjC,EAEDoB,MAAMV,EAAO,CAAEW,MAAAA,EAAOC,KAAAA,EAAMC,MAAAA,CAAM,EAAG,CACnC,MAAMC,EAAWC,IACXC,EAAUD,EAAI,EAAK,EACnBE,EAAS,CAAEC,QAAS,eAEpBC,EAAgB7B,EAAAA,GAAU,OAC9B,GAAIU,EAAMM,UAAYN,EAAMT,YAAc6B,OAAW,CACnD,IAAIC,EAAWhC,EAAYC,EAAOU,EAAMT,SAAS,EAE7CS,EAAMT,YAAc,GAAK8B,EAASC,SAAS,GAAG,IAChDD,EAAWA,EAASE,MAAM,EAAG,EAAE,GAGjCX,EAAK,oBAAqBS,CAAQ,GAClCP,EAAAA,GAAAA,YAAAA,EAAUxB,QAAVwB,MAAAA,EAAiBU,eAEjB,MACF,CAEAZ,EAAK,oBAAqBtB,CAAK,GAdXA,gBAiBhBmC,EAAiBC,EAAAA,GAAqB,CACtC1B,EAAMM,UACJ,CAAC,IAAK,IAAK,GAAG,EAAEqB,SAASD,EAAEE,GAAG,GAChCF,EAAEG,eAAc,GAHCH,iBAQvB,MAAO,IAAAI,EAAAC,EAAAC,EAAA,CAAA,IAEElB,EAAQ,QACIE,EAAQ1B,MAAK,mBAAA2C,GAAbjB,EAAQ1B,MAAK2C,EAAA,MACvB,CACL,UACA,CAAE,iCAAkCjC,EAAMQ,mBAAoB,EAC9D,CAAE,mBAAoBQ,EAAQ1B,KAAM,CAAC,EACtC,WACWU,EAAMC,WAAU,sBACPkB,EAAY,UACtBM,CAAa,EACpBR,CAAM,EAAA,CAGR,GAAGJ,EACHqB,QAASrB,EAAMsB,MACVC,GAAc,OACb,OAAAN,EAAA,MAAA,CAAA,MACa,gBAAgB,EAAA,EAAEjB,EAAAA,EAAMsB,QAANtB,YAAAA,EAAAA,KAAAA,EAAcuB,EAAU,CAAA,CAExD,EACDvB,EAAMqB,QAGf,CACH,CACF,CAAC"}