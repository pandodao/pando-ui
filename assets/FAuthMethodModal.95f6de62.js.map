{"version":3,"file":"FAuthMethodModal.95f6de62.js","sources":["../../packages/uikit/src/components/FAuthMethodModal/FAuthStep1.tsx","../../packages/uikit/src/components/FAuthMethodModal/FAuthFennecInstall.tsx","../../packages/uikit/src/components/FAuthMethodModal/FAuthMetamaskInstall.tsx","../../packages/uikit/src/services/mixin/oauth.js","../../packages/uikit/src/utils/authorize.ts","../../packages/uikit/src/components/FAuthMethodModal/FAuthMixinMessenger.tsx","../../packages/uikit/src/components/FAuthMethodModal/FAuthOnekeyInstall.tsx","../../packages/uikit/src/components/FAuthMethodModal/FAuthStep2.tsx","../../packages/uikit/src/components/FAuthMethodModal/FAuthMethodModal.tsx"],"sourcesContent":["import { defineComponent, computed, PropType } from \"vue\";\nimport { VImg, VIcon } from \"vuetify/components\";\nimport { useLocale, useTheme, useDisplay } from \"vuetify\";\n\nimport type { AuthData, AuthMethod, AuthMethodState } from \"../../types\";\n\nexport const FAuthStep1 = defineComponent({\n  name: \"FAuthStep1\",\n\n  inheritAttrs: false,\n\n  props: {\n    step: {\n      type: Number,\n      default: 1,\n    },\n    method: {\n      type: String as PropType<AuthMethod>,\n      default: \"\",\n    },\n    authMethods: {\n      type: Array as PropType<AuthMethod[]>,\n      default: () => [\"mixin\"],\n    },\n    authMethodState: {\n      type: Object as PropType<AuthMethodState>,\n      default: () => ({}),\n    },\n  },\n\n  emits: {\n    close: () => true,\n    auth: (v: AuthData) => true,\n    \"update:method\": (v: AuthMethod) => true,\n    \"update:step\": (v: number) => true,\n  },\n\n  setup(props, { emit }) {\n    const { t } = useLocale();\n    const { mdAndUp } = useDisplay();\n    const theme = useTheme();\n    const grey = theme.current.value.colors.greyscale_3;\n\n    const isDark = computed(() => {\n      return theme.name.value === \"dark\";\n    });\n\n    const authMethodsMeta = [\n      {\n        needNextStep: !props.authMethodState[\"metamask\"],\n        value: \"metamask\",\n        title: \"MetaMask\",\n        bg: isDark.value ? grey : \"#FFEEDD\",\n        logo: \"https://static.fox.one/image/logo_metamask@40x40.png\",\n      },\n      {\n        needNextStep: true,\n        value: \"mixin\",\n        title: \"Mixin\",\n        bg: isDark.value ? grey : \"#EBF8FF\",\n        logo: \"https://static.fox.one/image/logo_mixin@40x40.png\",\n      },\n      {\n        needNextStep: !props.authMethodState[\"fennec\"],\n        value: \"fennec\",\n        title: \"Fennec\",\n        bg: isDark.value ? grey : \"#E6E7FD\",\n        logo: \"https://static.fox.one/image/logo_fennec@40x40.png\",\n      },\n      {\n        needNextStep: false,\n        value: \"walletconnect\",\n        title: \"WalletConnect\",\n        bg: isDark.value ? grey : \"#f5f5f5\",\n        logo: isDark.value\n          ? \"https://static.fox.one/image/logo_walletconnect_dark@40x40.png\"\n          : \"https://static.fox.one/image/logo_walletconnect@40x40.png\",\n      },\n      {\n        needNextStep: !props.authMethodState[\"onekey\"],\n        value: \"onekey\",\n        title: \"OneKey\",\n        bg: isDark.value ? grey : \"#E9FEE6\",\n        logo: \"https://static.fox.one/image/logo_onekey@40x40.png\",\n      },\n    ];\n\n    const getAuthMethodsMeta = () =>\n      props.authMethods\n        .map((name: string) => authMethodsMeta.find((x) => x.value === name))\n        .filter((v) => !!v);\n\n    const handleAuth = (item) => {\n      if (!item.needNextStep) {\n        emit(\"close\");\n        emit(\"auth\", { type: item.value });\n      } else {\n        emit(\"update:method\", item.value);\n        emit(\"update:step\", 2);\n      }\n    };\n\n    return () => (\n      <div class=\"f-auth-step1\">\n        <div\n          class={[\n            \"f-auth-methods\",\n            { \"f-auth-methods--mobile\": !mdAndUp.value },\n          ]}\n        >\n          {getAuthMethodsMeta().map((item) => (\n            <div\n              key={item!.value}\n              style={{ backgroundColor: item!.bg }}\n              class=\"f-auth-method\"\n              onClick={() => handleAuth(item)}\n            >\n              <span class=\"f-auth-method__logo\">\n                <VImg width=\"40\" height=\"40\" src={item!.logo} />\n              </span>\n\n              <span class=\"f-auth-method__label\">{item!.title}</span>\n            </div>\n          ))}\n        </div>\n\n        <div class=\"f-auth-hint\">\n          <VIcon size=\"16\" color=\"warning\" class=\"f-auth-hint__horn\">\n            $horn\n          </VIcon>\n          <span innerHTML={t(\"$vuetify.uikit.gas_fee_hint\")}></span>\n        </div>\n      </div>\n    );\n  },\n});\n","import { defineComponent } from \"vue\";\nimport { useDisplay, useLocale } from \"vuetify\";\nimport { getBrowser } from \"../../utils\";\n\nimport { FButton } from \"../FButton\";\n\nexport const FAuthFennecInstall = defineComponent({\n  name: \"FAuthFennecInstall\",\n\n  inheritAttrs: false,\n\n  setup() {\n    const { smAndDown } = useDisplay();\n    const { t } = useLocale();\n\n    const handleInstall = () => {\n      const url =\n        getBrowser() === \"firefox\"\n          ? \"https://addons.mozilla.org/firefox/addon/fox_fennec\"\n          : \"https://chrome.google.com/webstore/detail/fennec/eincngenkhohbbfpkohipekcmnkfamjp\";\n\n      window.open(url);\n    };\n\n    return () => (\n      <div\n        class={[\n          \"f-auth-fennec\",\n          \"f-auth-step2\",\n          { \"f-auth-step2--small\": smAndDown.value },\n        ]}\n      >\n        <div class=\"f-auth-step2__left\"></div>\n\n        <div class=\"f-auth-step2__right\">\n          <div class=\"f-auth-step2__title\">\n            {t(\"$vuetify.uikit.fennec_not_installed\")}\n          </div>\n          <div class=\"f-auth-step2__subtitle\">\n            {t(\"$vuetify.uikit.fennec_introduction\")}\n          </div>\n          <FButton color=\"greyscale_1\" onClick={handleInstall}>\n            {t(\"$vuetify.uikit.install\")}\n          </FButton>\n        </div>\n      </div>\n    );\n  },\n});\n","import { defineComponent } from \"vue\";\nimport { useDisplay, useLocale } from \"vuetify\";\nimport { isDesktop } from \"@foxone/utils/helper\";\n\nimport { FButton } from \"../FButton\";\n\nexport const FAuthMetamaskInstall = defineComponent({\n  name: \"FAuthMetamaskInstall\",\n\n  inheritAttrs: false,\n\n  setup() {\n    const { smAndDown } = useDisplay();\n    const { t } = useLocale();\n\n    const handleInstall = () => {\n      const url = \"https://metamask.io/download/\";\n\n      window.open(url);\n    };\n\n    return () => (\n      <div\n        class={[\n          \"f-auth-metamask\",\n          \"f-auth-step2\",\n          {\n            \"f-auth-step2--small\": smAndDown.value,\n            \"f-auth-metamask--mobile\": !isDesktop(),\n          },\n        ]}\n      >\n        <div class=\"f-auth-step2__left\"></div>\n\n        <div class=\"f-auth-step2__right\">\n          <div\n            class=\"f-auth-step2__title\"\n            innerHTML={\n              isDesktop()\n                ? t(\"$vuetify.uikit.metamask_not_installed\")\n                : t(\"$vuetify.uikit.metamask_not_installed_2\")\n            }\n          />\n          <div\n            class=\"f-auth-step2__subtitle\"\n            innerHTML={\n              isDesktop()\n                ? t(\"$vuetify.uikit.metamask_introduction\")\n                : t(\"$vuetify.uikit.metamask_introduction_2\")\n            }\n          />\n          <FButton\n            color=\"greyscale_1\"\n            onClick={handleInstall}\n            innerHTML={\n              isDesktop()\n                ? t(\"$vuetify.uikit.install\")\n                : t(\"$vuetify.uikit.open_in_mixin\")\n            }\n          />\n        </div>\n      </div>\n    );\n  },\n});\n","/* eslint-disable  */\nimport ReconnectingWebSocket from \"reconnecting-websocket\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { ungzip } from \"pako/lib/inflate\";\nimport { gzip } from \"pako/lib/deflate\";\n\nfunction MixinClient(api, endpoint) {\n  this.api = api;\n  this.endpoint = endpoint;\n}\n\nMixinClient.prototype = {\n  disconnect() {\n    const self = this;\n\n    self.ws.close();\n  },\n\n  connect(callback, clientId, scope, codeChallenge) {\n    const self = this;\n\n    self.handled = false;\n    self.callback = callback;\n    self.ws = new ReconnectingWebSocket(self.endpoint, \"Mixin-OAuth-1\", {\n      maxReconnectionDelay: 5000,\n      minReconnectionDelay: 1000,\n      reconnectionDelayGrowFactor: 1.2,\n      connectionTimeout: 8000,\n      maxRetries: Infinity,\n      debug: false,\n    });\n\n    self.ws.addEventListener(\"message\", function (event) {\n      if (self.handled) {\n        return;\n      }\n      const fileReader = new FileReader();\n      fileReader.onload = function () {\n        const msg = ungzip(new Uint8Array(this.result), { to: \"string\" });\n        const authorization = JSON.parse(msg);\n        if (self.callback(authorization)) {\n          self.handled = true;\n          return;\n        }\n        setTimeout(function () {\n          self.sendRefreshCode(\n            clientId,\n            scope,\n            codeChallenge,\n            authorization.data\n          );\n        }, 1000);\n      };\n      fileReader.readAsArrayBuffer(event.data);\n    });\n\n    self.ws.addEventListener(\"open\", function (_) {\n      self.sendRefreshCode(clientId, scope, codeChallenge);\n    });\n  },\n\n  sendRefreshCode(clientId, scope, codeChallenge, authorization) {\n    const self = this;\n    if (self.handled) {\n      return;\n    }\n\n    self.send({\n      id: uuidv4().toUpperCase(),\n      action: \"REFRESH_OAUTH_CODE\",\n      params: {\n        client_id: clientId,\n        scope,\n        code_challenge: codeChallenge,\n        authorization_id: authorization ? authorization.authorization_id : \"\",\n      },\n    });\n  },\n\n  send(msg) {\n    try {\n      this.ws.send(gzip(JSON.stringify(msg)));\n    } catch (e) {\n      if (e instanceof DOMException) {\n      } else {\n        console.error(e);\n      }\n    }\n  },\n};\n\nexport default MixinClient;\n","import MixinClient from \"../services/mixin/oauth\";\nimport sha256 from \"crypto-js/sha256\";\nimport EncBase64 from \"crypto-js/enc-base64\";\n\nimport { isMixin } from \"@foxone/utils/mixin\";\nimport Base64 from \"@foxone/utils/base64\";\n\nexport interface AuthParams {\n  clientId: string;\n  scope: string;\n  pkce: boolean;\n}\n\nexport interface Callbacks {\n  onError?: (...args: any) => void;\n  onSuccess?: (...args: any) => void;\n  onShowUrl?: (...args: any) => void;\n}\n\nfunction base64URLEncode(str) {\n  return str.replace(/\\+/g, \"-\").replace(/\\//g, \"_\").replace(/=/g, \"\");\n}\n\nfunction generateRandomString(length) {\n  let text = \"\";\n  const possible =\n    \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n\n  for (let i = 0; i < length; i++) {\n    text += possible.charAt(Math.floor(Math.random() * possible.length));\n  }\n\n  return text;\n}\n\nfunction generateCodePair() {\n  const randomCode = generateRandomString(32);\n  const verifier = base64URLEncode(Base64.encode(randomCode));\n  const challenge = base64URLEncode(sha256(randomCode).toString(EncBase64));\n\n  return { verifier, challenge };\n}\n\nexport default function authorize(\n  params: AuthParams,\n  isFiresbox = false,\n  hosts: string[],\n  callbacks: Callbacks = {}\n) {\n  const [httpDefault, wsDefault] = isFiresbox\n    ? [\"https://xuexi-api.firesbox.com\", \"wss://xuexi-blaze.firesbox.com\"]\n    : [\"https://api.mixin.one\", \"wss://blaze.mixin.one\"];\n  const http = hosts[0] || httpDefault;\n  const ws = hosts[1] || wsDefault;\n  const client = new MixinClient(http, ws);\n\n  let opened = false;\n  const { challenge = \"\", verifier = \"\" } = params.pkce\n    ? generateCodePair()\n    : {};\n\n  // websocket message handler, return true to end loop\n  const handler = (resp): boolean => {\n    const data = resp.data;\n\n    // handle error\n    if (resp?.error?.code === 400 || resp?.error?.code === 10002) {\n      callbacks.onError?.(resp?.error);\n\n      return true;\n    }\n\n    // wait for next message\n    if (!data) return false;\n\n    // give code or token on success handler\n    if (data.authorization_code.length > 16) {\n      if (params.pkce) {\n        fetch(http + \"/oauth/token\", {\n          method: \"post\",\n          mode: \"cors\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n          },\n          body: JSON.stringify({\n            client_id: params.clientId,\n            code_verifier: verifier,\n            code: data.authorization_code,\n          }),\n        })\n          .then((response) => response.json())\n          .then((data) => {\n            const token = data?.data?.access_token;\n\n            if (token) {\n              callbacks.onSuccess?.(token);\n            } else {\n              callbacks.onError?.({\n                description: \"Get PKCE access token error\",\n              });\n            }\n          })\n          .catch(() => {\n            callbacks.onError?.({ description: \"Get PKCE access token error\" });\n          });\n      } else {\n        callbacks.onSuccess?.(data.authorization_code);\n      }\n\n      return true;\n    }\n\n    // open oauth modal or show qrcode\n    if (isMixin()) {\n      if (opened) return false;\n\n      window.location.href = \"mixin://codes/\" + data.code_id;\n      opened = true;\n    } else {\n      callbacks.onShowUrl?.(\"mixin://codes/\" + data.code_id);\n    }\n\n    return false;\n  };\n\n  client.connect(handler, params.clientId, params.scope, challenge);\n\n  return client;\n}\n","import { defineComponent, onMounted, ref, PropType } from \"vue\";\nimport { useDisplay, useLocale } from \"vuetify\";\nimport authorize from \"../../utils/authorize\";\n\nimport { VImg, VProgressCircular } from \"vuetify/components\";\nimport { FButton } from \"../FButton\";\nimport { FQRCode } from \"../FQRCode\";\n\nimport type { AuthData } from \"../../types\";\n\nexport const FAuthMixinMessenger = defineComponent({\n  name: \"FAuthMixinMessenger\",\n\n  inheritAttrs: false,\n\n  props: {\n    clientId: {\n      type: String,\n      default: \"\",\n    },\n    scope: {\n      type: String,\n      default: \"\",\n    },\n    pkce: {\n      type: Boolean,\n      default: false,\n    },\n    isFiresbox: {\n      type: Boolean,\n      default: false,\n    },\n    hosts: {\n      type: Array as PropType<Array<string>>,\n      default: () => [],\n    },\n  },\n\n  emits: {\n    auth: (v: AuthData) => true,\n    error: (v) => true,\n    close: () => true,\n  },\n\n  setup(props, { attrs, emit }) {\n    const { smAndDown } = useDisplay();\n    const { t } = useLocale();\n    const qrUrl = ref(\"\");\n    const client = ref<any>(null);\n\n    const handleInstall = () => {\n      const url = \"https://mixin.one/mm\";\n\n      window.open(url);\n    };\n\n    const handleOpenInApp = () => {\n      window.location.href = qrUrl.value;\n    };\n\n    onMounted(() => {\n      client.value = authorize(\n        { clientId: props.clientId, scope: props.scope, pkce: props.pkce },\n        props.isFiresbox,\n        props.hosts,\n        {\n          onShowUrl: (url) => (qrUrl.value = url),\n          onError: (error) => emit(\"error\", error),\n          onSuccess: (data) => {\n            emit(\"close\");\n\n            client.value?.disconnect();\n\n            if (props.pkce) {\n              emit(\"auth\", { type: \"mixin\", token: data });\n            } else {\n              emit(\"auth\", { type: \"mixin\", code: data });\n            }\n          },\n        }\n      );\n    });\n\n    return () => (\n      <div\n        class={`f-auth-mixin f-auth-step2 ${\n          smAndDown.value && \"f-auth-step2--small\"\n        }`}\n      >\n        <div class=\"f-auth-step2__left\">\n          {qrUrl.value ? (\n            <div class=\"f-auth-step2__qr-wrapper\">\n              <FQRCode\n                class=\"f-auth-step2__qr-code\"\n                text={qrUrl.value}\n                size={182}\n              />\n              <VImg\n                class=\"f-auth-step2__qr-logo\"\n                height=\"32\"\n                width=\"32\"\n                src=\"https://static.fox.one/image/icon_mixin@32x32.png\"\n              />\n            </div>\n          ) : (\n            <VProgressCircular\n              width={3}\n              indeterminate={true}\n              color=\"black\"\n              class=\"d-flex f-auth-step2__loading\"\n            />\n          )}\n        </div>\n\n        <div class=\"f-auth-step2__right\">\n          <div class=\"f-auth-step2__title\">\n            {t(\"$vuetify.uikit.scan_to_connect\")}\n          </div>\n          <div class=\"f-auth-step2__subtitle\">\n            <span\n              innerHTML={t(\"$vuetify.uikit.mixin_connect_detail\", [\n                \"<a class='f-auth-step2__link' href='https://mixin.one/messenger'>Mixin Messenger\" +\n                  \"<svg width='14' height='14' viewBox='0 0 14 14' fill='none' xmlns='http://www.w3.org/2000/svg'>\" +\n                  \"<path d='M12.2068 1.79276C10.2975 -0.116585 7.2018 -0.116585 5.29246 1.79276L4.64288 2.44234C4.25236 2.83286 4.25236 3.46603 4.64288 3.85655C5.03341 4.24707 5.66657 4.24707 6.0571 3.85655L6.70667 3.20698C7.83497 2.07868 9.6643 2.07868 10.7926 3.20698C11.9209 4.33528 11.9209 6.16461 10.7926 7.29291L10.1425 7.94304C9.75195 8.33357 9.75194 8.96673 10.1425 9.35726C10.533 9.74778 11.1662 9.74778 11.5567 9.35726L12.2068 8.70712C14.1162 6.79778 14.1162 3.70211 12.2068 1.79276Z' fill='#076aff'/>\" +\n                  \"<path d='M3.85726 6.05638C4.24779 5.66586 4.24779 5.03269 3.85726 4.64217C3.46674 4.25165 2.83357 4.25165 2.44305 4.64217L1.79236 5.29286C-0.116985 7.2022 -0.116985 10.2979 1.79236 12.2072C3.70171 14.1166 6.79738 14.1166 8.70672 12.2072L9.35713 11.5568C9.74765 11.1663 9.74765 10.5331 9.35713 10.1426C8.9666 9.75207 8.33344 9.75207 7.94291 10.1426L7.29251 10.793C6.16421 11.9213 4.33488 11.9213 3.20658 10.793C2.07828 9.6647 2.07828 7.83537 3.20658 6.70707L3.85726 6.05638Z' fill='#076aff'/>\" +\n                  \"<path d='M8.20674 7.2071C8.59727 6.81658 8.59727 6.18341 8.20674 5.79289C7.81622 5.40237 7.18305 5.40237 6.79253 5.79289L5.73187 6.85355C5.34134 7.24408 5.34134 7.87724 5.73187 8.26776C6.12239 8.65829 6.75556 8.65829 7.14608 8.26776L8.20674 7.2071Z' fill='#076aff'/>\" +\n                  \"</svg>\" +\n                  \"</a>\",\n              ])}\n            />\n          </div>\n\n          <div class=\"f-auth-step2__actions\">\n            <FButton color=\"greyscale_1\" onClick={handleOpenInApp}>\n              {t(\"$vuetify.uikit.open_in_mixin\")}\n            </FButton>\n            <FButton color=\"greyscale_6\" onClick={handleInstall}>\n              {t(\"$vuetify.uikit.install\")}\n            </FButton>\n          </div>\n        </div>\n      </div>\n    );\n  },\n});\n","import { defineComponent } from \"vue\";\nimport { useDisplay, useLocale } from \"vuetify\";\nimport { isDesktop } from \"@foxone/utils/helper\";\n\nimport { FButton } from \"../FButton\";\n\nexport const FAuthOnekeyInstall = defineComponent({\n  name: \"FAuthOnekeyInstall\",\n\n  inheritAttrs: false,\n\n  setup() {\n    const { smAndDown } = useDisplay();\n    const { t } = useLocale();\n\n    const handleInstall = () => {\n      const url = \"https://onekey.so/download?client=browserExtension\";\n\n      window.open(url);\n    };\n\n    return () => (\n      <div\n        class={[\n          \"f-auth-onekey\",\n          \"f-auth-step2\",\n          {\n            \"f-auth-step2--small\": smAndDown.value,\n            \"f-auth-onekey--mobile\": !isDesktop,\n          },\n        ]}\n      >\n        <div class=\"f-auth-step2__left\"></div>\n        <div class=\"f-auth-step2__right\">\n          <div\n            class=\"f-auth-step2__title\"\n            innerHTML={\n              isDesktop()\n                ? t(\"$vuetify.uikit.onekey_not_installed\")\n                : t(\"$vuetify.uikit.onekey_not_installed_2\")\n            }\n          />\n          <div\n            class=\"f-auth-step2__subtitle\"\n            innerHTML={\n              isDesktop()\n                ? t(\"$vuetify.uikit.onekey_introduction\")\n                : t(\"$vuetify.uikit.onekey_introduction_2\")\n            }\n          />\n\n          <FButton color=\"greyscale_1\" onClick={handleInstall}>\n            {t(\"$vuetify.uikit.install\")}\n          </FButton>\n        </div>\n      </div>\n    );\n  },\n});\n","import { defineComponent, computed, PropType } from \"vue\";\nimport { VIcon } from \"vuetify/components\";\nimport { FButton } from \"../FButton\";\n\nimport { FAuthFennecInstall } from \"./FAuthFennecInstall\";\nimport { FAuthMetamaskInstall } from \"./FAuthMetamaskInstall\";\nimport { FAuthMixinMessenger } from \"./FAuthMixinMessenger\";\nimport { FAuthOnekeyInstall } from \"./FAuthOnekeyInstall\";\n\nimport type { AuthMethod, AuthData } from \"../../types\";\n\nexport const FAuthStep2 = defineComponent({\n  name: \"FAuthStep2\",\n\n  inheritAttrs: false,\n\n  props: {\n    method: {\n      type: String as PropType<AuthMethod>,\n      default: \"\",\n    },\n    clientId: {\n      type: String,\n      default: \"\",\n    },\n    scope: {\n      type: String,\n      default: \"\",\n    },\n    pkce: {\n      type: Boolean,\n      default: false,\n    },\n    isFiresbox: {\n      type: Boolean,\n      default: false,\n    },\n    hosts: {\n      type: Array as PropType<Array<string>>,\n      default: () => [],\n    },\n  },\n\n  emits: {\n    \"update:step\": (v: number) => true,\n    auth: (v: AuthData) => true,\n    error: (v) => true,\n    close: () => true,\n  },\n\n  setup(props, { emit, attrs }) {\n    const getComponent = () => {\n      switch (props.method) {\n        case \"fennec\":\n          return FAuthFennecInstall;\n        case \"metamask\":\n          return FAuthMetamaskInstall;\n        case \"onekey\":\n          return FAuthOnekeyInstall;\n        default:\n          return FAuthMixinMessenger;\n      }\n    };\n\n    const meta = computed(() => {\n      return {\n        wrapper: getComponent(),\n      };\n    });\n\n    return () => (\n      <div class=\"f-auth-step2\">\n        <meta.value.wrapper\n          {...props}\n          onAuth={(v) => emit(\"auth\", v)}\n          onError={(v) => emit(\"error\", v)}\n          onClose={() => emit(\"close\")}\n        />\n\n        <FButton\n          icon\n          size=\"32\"\n          class=\"f-auth-step2__back\"\n          onClick={() => emit(\"update:step\", 1)}\n        >\n          <VIcon color=\"black\">$back</VIcon>\n        </FButton>\n      </div>\n    );\n  },\n});\n","import \"./FAuthMethodModal.scss\";\n\nimport { defineComponent, ref, PropType, watch } from \"vue\";\nimport { useLocale } from \"vuetify\";\nimport { isMixin } from \"@foxone/utils/mixin\";\n\nimport { FModal } from \"../FModal\";\nimport { FAuthStep1 } from \"./FAuthStep1\";\nimport { FAuthStep2 } from \"./FAuthStep2\";\n\nimport authorize from \"../../utils/authorize\";\n\nimport { AuthData, AuthMethod, AuthMethodState } from \"../../types\";\n\nexport const FAuthMethodModal = defineComponent({\n  name: \"FAuthMethodModal\",\n\n  inheritAttrs: false,\n\n  props: {\n    authMethods: {\n      type: Array as PropType<AuthMethod[]>,\n      default: () => [\"mixin\"],\n    },\n    authMethodState: {\n      type: Object as PropType<AuthMethodState>,\n      default: () => ({}),\n    },\n    clientId: {\n      type: String,\n      default: \"\",\n    },\n    scope: {\n      type: String,\n      default: \"\",\n    },\n    isFiresbox: {\n      type: Boolean,\n      default: false,\n    },\n    hosts: {\n      type: Array as PropType<Array<string>>,\n      default: () => [],\n    },\n    pkce: {\n      type: Boolean,\n      default: false,\n    },\n  },\n\n  emits: {\n    auth: (v: AuthData) => true,\n    error: (v) => true,\n    destroy: () => true,\n  },\n\n  setup(props, { emit, expose }) {\n    const { t } = useLocale();\n    const dialog = ref(false);\n    const step = ref(1);\n    const client = ref<any>(null);\n    const method = ref<AuthMethod | \"\">(\"\");\n\n    const content = () => (\n      <div class=\"f-auth-methods__wrapper\">\n        {step.value === 1 ? (\n          <FAuthStep1\n            {...props}\n            v-model:step={step.value}\n            v-model:method={method.value}\n            onClose={close}\n            onAuth={(v: AuthData) => emit(\"auth\", v)}\n            onError={(e) => emit(\"error\", e)}\n          />\n        ) : (\n          <FAuthStep2\n            {...props}\n            v-model:step={step.value}\n            v-model:method={method.value}\n            onClose={close}\n            onAuth={(v: AuthData) => emit(\"auth\", v)}\n            onError={(e) => emit(\"error\", e)}\n          />\n        )}\n      </div>\n    );\n\n    const close = () => {\n      dialog.value = false;\n    };\n\n    const handleDialogChange = (value) => {\n      if (!value) {\n        step.value = 1;\n        method.value = \"\";\n        dialog.value = false;\n        close();\n        emit(\"destroy\");\n        client.value?.disconnect();\n      }\n    };\n\n    const handleModalValueChange = (value) => {\n      dialog.value = value;\n      emit(\"error\", new Error(\"Cancelled\"));\n    };\n\n    watch(() => dialog.value, handleDialogChange);\n\n    const show = () => {\n      if (isMixin() && props.authMethods.includes(\"mixin\")) {\n        client.value = authorize(\n          { clientId: props.clientId, scope: props.scope, pkce: props.pkce },\n          props.isFiresbox,\n          props.hosts,\n          {\n            onError: (error) => emit(\"error\", error),\n            onSuccess: (data) => {\n              if (props.pkce) {\n                emit(\"auth\", { type: \"mixin\", token: data });\n              } else {\n                emit(\"auth\", { type: \"mixin\", code: data });\n              }\n            },\n          }\n        );\n      } else {\n        dialog.value = true;\n      }\n    };\n\n    expose({ show, close });\n\n    return () => (\n      <FModal\n        modelValue={dialog.value}\n        title={step.value === 1 ? t(\"$vuetify.uikit.connect_wallet\") : \"\"}\n        max-width=\"628\"\n        onUpdate:modelValue={handleModalValueChange}\n      >\n        {{\n          default: () => content(),\n        }}\n      </FModal>\n    );\n  },\n});\n"],"names":["FAuthStep1","defineComponent","name","inheritAttrs","props","step","type","Number","default","method","String","authMethods","Array","authMethodState","Object","emits","close","auth","v","setup","emit","t","useLocale","mdAndUp","useDisplay","theme","useTheme","grey","current","value","colors","greyscale_3","isDark","computed","authMethodsMeta","needNextStep","title","bg","logo","getAuthMethodsMeta","map","find","x","filter","handleAuth","item","_createVNode","backgroundColor","onClick","VImg","VIcon","_createTextVNode","_isSlot","s","prototype","toString","call","_isVNode","FAuthFennecInstall","smAndDown","handleInstall","url","getBrowser","window","open","_slot","FButton","FAuthMetamaskInstall","isDesktop","MixinClient","api","endpoint","__name","callback","clientId","scope","codeChallenge","self","ReconnectingWebSocket","event","fileReader","msg","ungzip","authorization","_","uuidv4","gzip","e","base64URLEncode","str","generateRandomString","length","text","possible","i","generateCodePair","randomCode","verifier","Base64","challenge","sha256","EncBase64","authorize","params","isFiresbox","hosts","callbacks","httpDefault","wsDefault","http","ws","client","opened","handler","resp","data","_a","_b","_c","response","token","_d","isMixin","_e","FAuthMixinMessenger","pkce","Boolean","error","attrs","qrUrl","ref","handleOpenInApp","location","href","onMounted","onShowUrl","onError","onSuccess","disconnect","code","_slot2","FQRCode","VProgressCircular","FAuthOnekeyInstall","FAuthStep2","getComponent","meta","wrapper","_mergeProps","onClose","FAuthMethodModal","destroy","expose","dialog","content","$event","handleDialogChange","handleModalValueChange","Error","watch","show","includes","FModal"],"mappings":"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"}