{"version":3,"file":"VTextField.d9025984.js","sources":["../../node_modules/vuetify/lib/components/VTextField/VTextField.mjs"],"sourcesContent":["import { Fragment as _Fragment, withDirectives as _withDirectives, createVNode as _createVNode, mergeProps as _mergeProps, resolveDirective as _resolveDirective } from \"vue\";\n// Styles\nimport \"./VTextField.css\";\n\n// Components\nimport { filterFieldProps, makeVFieldProps, VField } from \"../VField/VField.mjs\";\nimport { filterInputProps, makeVInputProps, VInput } from \"../VInput/VInput.mjs\";\nimport { VCounter } from \"../VCounter/index.mjs\"; // Directives\nimport Intersect from \"../../directives/intersect/index.mjs\"; // Composables\nimport { forwardRefs } from \"../../composables/forwardRefs.mjs\";\nimport { useFocus } from \"../../composables/focus.mjs\";\nimport { useProxiedModel } from \"../../composables/proxiedModel.mjs\"; // Utilities\nimport { cloneVNode, computed, nextTick, ref } from 'vue';\nimport { callEvent, filterInputAttrs, genericComponent, pick, propsFactory, useRender } from \"../../util/index.mjs\"; // Types\nconst activeTypes = ['color', 'file', 'time', 'date', 'datetime-local', 'week', 'month'];\nconst EventProp = [Function, Array];\nexport const makeVTextFieldProps = propsFactory({\n  autofocus: Boolean,\n  counter: [Boolean, Number, String],\n  counterValue: Function,\n  hint: String,\n  persistentHint: Boolean,\n  prefix: String,\n  placeholder: String,\n  persistentPlaceholder: Boolean,\n  persistentCounter: Boolean,\n  suffix: String,\n  type: {\n    type: String,\n    default: 'text'\n  },\n  ...makeVInputProps(),\n  ...makeVFieldProps()\n}, 'v-text-field');\nexport const VTextField = genericComponent()({\n  name: 'VTextField',\n  directives: {\n    Intersect\n  },\n  inheritAttrs: false,\n  props: makeVTextFieldProps(),\n  emits: {\n    'click:control': e => true,\n    'click:input': e => true,\n    'update:focused': focused => true,\n    'update:modelValue': val => true\n  },\n  setup(props, _ref) {\n    let {\n      attrs,\n      emit,\n      slots\n    } = _ref;\n    const model = useProxiedModel(props, 'modelValue');\n    const {\n      isFocused,\n      focus,\n      blur\n    } = useFocus(props);\n    const counterValue = computed(() => {\n      return typeof props.counterValue === 'function' ? props.counterValue(model.value) : (model.value ?? '').toString().length;\n    });\n    const max = computed(() => {\n      if (attrs.maxlength) return attrs.maxlength;\n      if (!props.counter || typeof props.counter !== 'number' && typeof props.counter !== 'string') return undefined;\n      return props.counter;\n    });\n    function onIntersect(isIntersecting, entries) {\n      var _entries$0$target, _entries$0$target$foc;\n      if (!props.autofocus || !isIntersecting) return;\n      (_entries$0$target = entries[0].target) == null ? void 0 : (_entries$0$target$foc = _entries$0$target.focus) == null ? void 0 : _entries$0$target$foc.call(_entries$0$target);\n    }\n    const vInputRef = ref();\n    const vFieldRef = ref();\n    const inputRef = ref();\n    const isActive = computed(() => activeTypes.includes(props.type) || props.persistentPlaceholder || isFocused.value);\n    const messages = computed(() => {\n      return props.messages.length ? props.messages : isFocused.value || props.persistentHint ? props.hint : '';\n    });\n    function onFocus() {\n      if (inputRef.value !== document.activeElement) {\n        var _inputRef$value;\n        (_inputRef$value = inputRef.value) == null ? void 0 : _inputRef$value.focus();\n      }\n      if (!isFocused.value) focus();\n    }\n    function onControlClick(e) {\n      onFocus();\n      emit('click:control', e);\n    }\n    function onClear(e) {\n      e.stopPropagation();\n      onFocus();\n      nextTick(() => {\n        model.value = null;\n        callEvent(props['onClick:clear'], e);\n      });\n    }\n    function onInput(e) {\n      model.value = e.target.value;\n    }\n    useRender(() => {\n      const hasCounter = !!(slots.counter || props.counter || props.counterValue);\n      const hasDetails = !!(hasCounter || slots.details);\n      const [rootAttrs, inputAttrs] = filterInputAttrs(attrs);\n      const [{\n        modelValue: _,\n        ...inputProps\n      }] = filterInputProps(props);\n      const [fieldProps] = filterFieldProps(props);\n      return _createVNode(VInput, _mergeProps({\n        \"ref\": vInputRef,\n        \"modelValue\": model.value,\n        \"onUpdate:modelValue\": $event => model.value = $event,\n        \"class\": ['v-text-field', {\n          'v-text-field--prefixed': props.prefix,\n          'v-text-field--suffixed': props.suffix,\n          'v-text-field--flush-details': ['plain', 'underlined'].includes(props.variant)\n        }],\n        \"onClick:prepend\": props['onClick:prepend'],\n        \"onClick:append\": props['onClick:append']\n      }, rootAttrs, inputProps, {\n        \"focused\": isFocused.value,\n        \"messages\": messages.value\n      }), {\n        ...slots,\n        default: _ref2 => {\n          let {\n            id,\n            isDisabled,\n            isDirty,\n            isReadonly,\n            isValid\n          } = _ref2;\n          return _createVNode(VField, _mergeProps({\n            \"ref\": vFieldRef,\n            \"onMousedown\": e => {\n              if (e.target === inputRef.value) return;\n              e.preventDefault();\n            },\n            \"onClick:control\": onControlClick,\n            \"onClick:clear\": onClear,\n            \"onClick:prependInner\": props['onClick:prependInner'],\n            \"onClick:appendInner\": props['onClick:appendInner'],\n            \"role\": \"textbox\"\n          }, fieldProps, {\n            \"id\": id.value,\n            \"active\": isActive.value || isDirty.value,\n            \"dirty\": isDirty.value || props.dirty,\n            \"focused\": isFocused.value,\n            \"error\": isValid.value === false\n          }), {\n            ...slots,\n            default: _ref3 => {\n              let {\n                props: {\n                  class: fieldClass,\n                  ...slotProps\n                }\n              } = _ref3;\n              const inputNode = _withDirectives(_createVNode(\"input\", _mergeProps({\n                \"ref\": inputRef,\n                \"value\": model.value,\n                \"onInput\": onInput,\n                \"autofocus\": props.autofocus,\n                \"readonly\": isReadonly.value,\n                \"disabled\": isDisabled.value,\n                \"name\": props.name,\n                \"placeholder\": props.placeholder,\n                \"size\": 1,\n                \"type\": props.type,\n                \"onFocus\": onFocus,\n                \"onBlur\": blur\n              }, slotProps, inputAttrs), null), [[_resolveDirective(\"intersect\"), {\n                handler: onIntersect\n              }, null, {\n                once: true\n              }]]);\n              return _createVNode(_Fragment, null, [props.prefix && _createVNode(\"span\", {\n                \"class\": \"v-text-field__prefix\"\n              }, [props.prefix]), slots.default ? _createVNode(\"div\", {\n                \"class\": fieldClass,\n                \"onClick\": e => emit('click:input', e),\n                \"data-no-activator\": \"\"\n              }, [slots.default(), inputNode]) : cloneVNode(inputNode, {\n                class: fieldClass\n              }), props.suffix && _createVNode(\"span\", {\n                \"class\": \"v-text-field__suffix\"\n              }, [props.suffix])]);\n            }\n          });\n        },\n        details: hasDetails ? slotProps => {\n          var _slots$details;\n          return _createVNode(_Fragment, null, [(_slots$details = slots.details) == null ? void 0 : _slots$details.call(slots, slotProps), hasCounter && _createVNode(_Fragment, null, [_createVNode(\"span\", null, null), _createVNode(VCounter, {\n            \"active\": props.persistentCounter || isFocused.value,\n            \"value\": counterValue.value,\n            \"max\": max.value\n          }, slots.counter)])]);\n        } : undefined\n      });\n    });\n    return forwardRefs({}, vInputRef, vFieldRef, inputRef);\n  }\n});\nexport function filterVTextFieldProps(props) {\n  return pick(props, Object.keys(VTextField.props));\n}\n//# sourceMappingURL=VTextField.mjs.map"],"names":["activeTypes","makeVTextFieldProps","propsFactory","makeVInputProps","makeVFieldProps","VTextField","genericComponent","Intersect","focused","val","props","_ref","attrs","emit","slots","model","useProxiedModel","isFocused","focus","blur","useFocus","counterValue","computed","_a","max","onIntersect","isIntersecting","entries","_entries$0$target","_entries$0$target$foc","__name","vInputRef","ref","vFieldRef","inputRef","isActive","messages","onFocus","_inputRef$value","onControlClick","e","onClear","nextTick","callEvent","onInput","useRender","hasCounter","hasDetails","rootAttrs","inputAttrs","filterInputAttrs","_","inputProps","filterInputProps","fieldProps","filterFieldProps","_createVNode","VInput","_mergeProps","$event","_ref2","id","isDisabled","isDirty","isReadonly","isValid","VField","_ref3","fieldClass","slotProps","inputNode","_withDirectives","_resolveDirective","_Fragment","cloneVNode","_slots$details","VCounter","forwardRefs","filterVTextFieldProps","pick"],"mappings":"0jBAcA,MAAMA,GAAc,CAAC,QAAS,OAAQ,OAAQ,OAAQ,iBAAkB,OAAQ,OAAO,EAE1EC,GAAsBC,GAAa,CAC9C,UAAW,QACX,QAAS,CAAC,QAAS,OAAQ,MAAM,EACjC,aAAc,SACd,KAAM,OACN,eAAgB,QAChB,OAAQ,OACR,YAAa,OACb,sBAAuB,QACvB,kBAAmB,QACnB,OAAQ,OACR,KAAM,CACJ,KAAM,OACN,QAAS,MACV,EACD,GAAGC,EAAiB,EACpB,GAAGC,EAAiB,CACtB,EAAG,cAAc,EACJC,GAAaC,GAAgB,EAAG,CAC3C,KAAM,aACN,WAAY,CACV,UAAAC,EACD,EACD,aAAc,GACd,MAAON,GAAqB,EAC5B,MAAO,CACL,gBAAiB,GAAK,GACtB,cAAe,GAAK,GACpB,iBAAkBO,GAAW,GAC7B,oBAAqBC,GAAO,EAC7B,EACD,MAAMC,EAAOC,EAAM,CACjB,GAAI,CACF,MAAAC,EACA,KAAAC,EACA,MAAAC,CACD,EAAGH,EACJ,MAAMI,EAAQC,GAAgBN,EAAO,YAAY,EAC3C,CACJ,UAAAO,EACA,MAAAC,EACA,KAAAC,CACN,EAAQC,GAASV,CAAK,EACZW,EAAeC,EAAS,IAAM,OAClC,OAAO,OAAOZ,EAAM,cAAiB,WAAaA,EAAM,aAAaK,EAAM,KAAK,IAAKQ,EAAAR,EAAM,QAAN,KAAAQ,EAAe,IAAI,SAAQ,EAAG,MACzH,CAAK,EACKC,EAAMF,EAAS,IAAM,CACzB,GAAIV,EAAM,UAAW,OAAOA,EAAM,UAClC,GAAI,GAACF,EAAM,SAAW,OAAOA,EAAM,SAAY,UAAY,OAAOA,EAAM,SAAY,UACpF,OAAOA,EAAM,OACnB,CAAK,EACD,SAASe,EAAYC,EAAgBC,EAAS,CAC5C,IAAIC,EAAmBC,EACnB,CAACnB,EAAM,WAAa,CAACgB,IACxBE,EAAoBD,EAAQ,GAAG,SAAW,OAAiBE,EAAwBD,EAAkB,QAAU,MAAgBC,EAAsB,KAAKD,CAAiB,CAC7K,CAJQE,EAAAL,EAAA,eAKT,MAAMM,EAAYC,IACZC,EAAYD,IACZE,EAAWF,IACXG,EAAWb,EAAS,IAAMtB,GAAY,SAASU,EAAM,IAAI,GAAKA,EAAM,uBAAyBO,EAAU,KAAK,EAC5GmB,EAAWd,EAAS,IACjBZ,EAAM,SAAS,OAASA,EAAM,SAAWO,EAAU,OAASP,EAAM,eAAiBA,EAAM,KAAO,EACxG,EACD,SAAS2B,GAAU,CACjB,GAAIH,EAAS,QAAU,SAAS,cAAe,CAC7C,IAAII,GACHA,EAAkBJ,EAAS,QAAU,MAAgBI,EAAgB,OACvE,CACIrB,EAAU,OAAOC,GACvB,CANQY,EAAAO,EAAA,WAOT,SAASE,EAAeC,EAAG,CACzBH,IACAxB,EAAK,gBAAiB2B,CAAC,CACxB,CAHQV,EAAAS,EAAA,kBAIT,SAASE,EAAQD,EAAG,CAClBA,EAAE,gBAAe,EACjBH,IACAK,EAAS,IAAM,CACb3B,EAAM,MAAQ,KACd4B,GAAUjC,EAAM,iBAAkB8B,CAAC,CAC3C,CAAO,CACF,CAPQV,EAAAW,EAAA,WAQT,SAASG,EAAQJ,EAAG,CAClBzB,EAAM,MAAQyB,EAAE,OAAO,KACxB,CAFQ,OAAAV,EAAAc,EAAA,WAGTC,GAAU,IAAM,CACd,MAAMC,EAAa,CAAC,EAAEhC,EAAM,SAAWJ,EAAM,SAAWA,EAAM,cACxDqC,EAAa,CAAC,EAAED,GAAchC,EAAM,SACpC,CAACkC,EAAWC,CAAU,EAAIC,GAAiBtC,CAAK,EAChD,CAAC,CACL,WAAYuC,MACTC,CACX,CAAO,EAAIC,GAAiB3C,CAAK,EACrB,CAAC4C,CAAU,EAAIC,EAAiB7C,CAAK,EAC3C,OAAO8C,EAAaC,GAAQC,EAAY,CACtC,IAAO3B,EACP,WAAchB,EAAM,MACpB,sBAAuB4C,GAAU5C,EAAM,MAAQ4C,EAC/C,MAAS,CAAC,eAAgB,CACxB,yBAA0BjD,EAAM,OAChC,yBAA0BA,EAAM,OAChC,8BAA+B,CAAC,QAAS,YAAY,EAAE,SAASA,EAAM,OAAO,CACvF,CAAS,EACD,kBAAmBA,EAAM,mBACzB,iBAAkBA,EAAM,iBAChC,EAASsC,EAAWI,EAAY,CACxB,QAAWnC,EAAU,MACrB,SAAYmB,EAAS,KAC7B,CAAO,EAAG,CACF,GAAGtB,EACH,QAAS8C,GAAS,CAChB,GAAI,CACF,GAAAC,EACA,WAAAC,EACA,QAAAC,EACA,WAAAC,EACA,QAAAC,CACD,EAAGL,EACJ,OAAOJ,EAAaU,EAAQR,EAAY,CACtC,IAAOzB,EACP,YAAeO,GAAK,CACdA,EAAE,SAAWN,EAAS,OAC1BM,EAAE,eAAc,CACjB,EACD,kBAAmBD,EACnB,gBAAiBE,EACjB,uBAAwB/B,EAAM,wBAC9B,sBAAuBA,EAAM,uBAC7B,KAAQ,SACT,EAAE4C,EAAY,CACb,GAAMO,EAAG,MACT,OAAU1B,EAAS,OAAS4B,EAAQ,MACpC,MAASA,EAAQ,OAASrD,EAAM,MAChC,QAAWO,EAAU,MACrB,MAASgD,EAAQ,QAAU,EACvC,CAAW,EAAG,CACF,GAAGnD,EACH,QAASqD,GAAS,CAChB,GAAI,CACF,MAAO,CACL,MAAOC,KACJC,CACJ,CACF,EAAGF,EACJ,MAAMG,EAAYC,EAAgBf,EAAa,QAASE,EAAY,CAClE,IAAOxB,EACP,MAASnB,EAAM,MACf,QAAW6B,EACX,UAAalC,EAAM,UACnB,SAAYsD,EAAW,MACvB,SAAYF,EAAW,MACvB,KAAQpD,EAAM,KACd,YAAeA,EAAM,YACrB,KAAQ,EACR,KAAQA,EAAM,KACd,QAAW2B,EACX,OAAUlB,CAC1B,EAAiBkD,EAAWpB,CAAU,EAAG,IAAI,EAAG,CAAC,CAACuB,EAAkB,WAAW,EAAG,CAClE,QAAS/C,CACV,EAAE,KAAM,CACP,KAAM,EACP,CAAA,CAAC,CAAC,EACH,OAAO+B,EAAaiB,EAAW,KAAM,CAAC/D,EAAM,QAAU8C,EAAa,OAAQ,CACzE,MAAS,sBACzB,EAAiB,CAAC9C,EAAM,MAAM,CAAC,EAAGI,EAAM,QAAU0C,EAAa,MAAO,CACtD,MAASY,EACT,QAAW5B,GAAK3B,EAAK,cAAe2B,CAAC,EACrC,oBAAqB,EACrC,EAAiB,CAAC1B,EAAM,QAAS,EAAEwD,CAAS,CAAC,EAAII,EAAWJ,EAAW,CACvD,MAAOF,CACR,CAAA,EAAG1D,EAAM,QAAU8C,EAAa,OAAQ,CACvC,MAAS,sBACV,EAAE,CAAC9C,EAAM,MAAM,CAAC,CAAC,CAAC,CACpB,CACb,CAAW,CACF,EACD,QAASqC,EAAasB,GAAa,CACjC,IAAIM,EACJ,OAAOnB,EAAaiB,EAAW,KAAM,EAAEE,EAAiB7D,EAAM,UAAY,KAAO,OAAS6D,EAAe,KAAK7D,EAAOuD,CAAS,EAAGvB,GAAcU,EAAaiB,EAAW,KAAM,CAACjB,EAAa,OAAQ,KAAM,IAAI,EAAGA,EAAaoB,EAAU,CACrO,OAAUlE,EAAM,mBAAqBO,EAAU,MAC/C,MAASI,EAAa,MACtB,IAAOG,EAAI,KACZ,EAAEV,EAAM,OAAO,CAAC,CAAC,CAAC,CAAC,CAC9B,EAAY,MACZ,CAAO,CACP,CAAK,EACM+D,GAAY,CAAE,EAAE9C,EAAWE,EAAWC,CAAQ,CACtD,CACH,CAAC,EACM,SAAS4C,GAAsBpE,EAAO,CAC3C,OAAOqE,GAAKrE,EAAO,OAAO,KAAKL,GAAW,KAAK,CAAC,CAClD,CAFgByB,EAAAgD,GAAA"}