{"version":3,"file":"VTextField.32fb86ed.js","sources":["../../node_modules/vuetify/lib/components/VTextField/VTextField.mjs"],"sourcesContent":["import { Fragment as _Fragment, withDirectives as _withDirectives, createVNode as _createVNode, mergeProps as _mergeProps, resolveDirective as _resolveDirective } from \"vue\";\n// Styles\nimport \"./VTextField.css\";\n\n// Components\nimport { filterFieldProps, makeVFieldProps, VField } from \"../VField/VField.mjs\";\nimport { filterInputProps, makeVInputProps, VInput } from \"../VInput/VInput.mjs\";\nimport { VCounter } from \"../VCounter/index.mjs\"; // Directives\nimport Intersect from \"../../directives/intersect/index.mjs\"; // Composables\nimport { forwardRefs } from \"../../composables/forwardRefs.mjs\";\nimport { useFocus } from \"../../composables/focus.mjs\";\nimport { useProxiedModel } from \"../../composables/proxiedModel.mjs\"; // Utilities\nimport { cloneVNode, computed, nextTick, ref } from 'vue';\nimport { callEvent, filterInputAttrs, genericComponent, pick, propsFactory, useRender } from \"../../util/index.mjs\"; // Types\nconst activeTypes = ['color', 'file', 'time', 'date', 'datetime-local', 'week', 'month'];\nconst EventProp = [Function, Array];\nexport const makeVTextFieldProps = propsFactory({\n  autofocus: Boolean,\n  counter: [Boolean, Number, String],\n  counterValue: Function,\n  hint: String,\n  persistentHint: Boolean,\n  prefix: String,\n  placeholder: String,\n  persistentPlaceholder: Boolean,\n  persistentCounter: Boolean,\n  suffix: String,\n  type: {\n    type: String,\n    default: 'text'\n  },\n  ...makeVInputProps(),\n  ...makeVFieldProps()\n}, 'v-text-field');\nexport const VTextField = genericComponent()({\n  name: 'VTextField',\n  directives: {\n    Intersect\n  },\n  inheritAttrs: false,\n  props: makeVTextFieldProps(),\n  emits: {\n    'click:control': e => true,\n    'mousedown:control': e => true,\n    'update:focused': focused => true,\n    'update:modelValue': val => true\n  },\n  setup(props, _ref) {\n    let {\n      attrs,\n      emit,\n      slots\n    } = _ref;\n    const model = useProxiedModel(props, 'modelValue');\n    const {\n      isFocused,\n      focus,\n      blur\n    } = useFocus(props);\n    const counterValue = computed(() => {\n      return typeof props.counterValue === 'function' ? props.counterValue(model.value) : (model.value ?? '').toString().length;\n    });\n    const max = computed(() => {\n      if (attrs.maxlength) return attrs.maxlength;\n      if (!props.counter || typeof props.counter !== 'number' && typeof props.counter !== 'string') return undefined;\n      return props.counter;\n    });\n    function onIntersect(isIntersecting, entries) {\n      if (!props.autofocus || !isIntersecting) return;\n      entries[0].target?.focus?.();\n    }\n    const vInputRef = ref();\n    const vFieldRef = ref();\n    const inputRef = ref();\n    const isActive = computed(() => activeTypes.includes(props.type) || props.persistentPlaceholder || isFocused.value);\n    const messages = computed(() => {\n      return props.messages.length ? props.messages : isFocused.value || props.persistentHint ? props.hint : '';\n    });\n    function onFocus() {\n      if (inputRef.value !== document.activeElement) {\n        inputRef.value?.focus();\n      }\n      if (!isFocused.value) focus();\n    }\n    function onControlMousedown(e) {\n      emit('mousedown:control', e);\n      if (e.target === inputRef.value) return;\n      onFocus();\n      e.preventDefault();\n    }\n    function onControlClick(e) {\n      onFocus();\n      emit('click:control', e);\n    }\n    function onClear(e) {\n      e.stopPropagation();\n      onFocus();\n      nextTick(() => {\n        model.value = null;\n        callEvent(props['onClick:clear'], e);\n      });\n    }\n    function onInput(e) {\n      model.value = e.target.value;\n    }\n    useRender(() => {\n      const hasCounter = !!(slots.counter || props.counter || props.counterValue);\n      const hasDetails = !!(hasCounter || slots.details);\n      const [rootAttrs, inputAttrs] = filterInputAttrs(attrs);\n      const [{\n        modelValue: _,\n        ...inputProps\n      }] = filterInputProps(props);\n      const [fieldProps] = filterFieldProps(props);\n      return _createVNode(VInput, _mergeProps({\n        \"ref\": vInputRef,\n        \"modelValue\": model.value,\n        \"onUpdate:modelValue\": $event => model.value = $event,\n        \"class\": ['v-text-field', {\n          'v-text-field--prefixed': props.prefix,\n          'v-text-field--suffixed': props.suffix,\n          'v-text-field--flush-details': ['plain', 'underlined'].includes(props.variant)\n        }],\n        \"onClick:prepend\": props['onClick:prepend'],\n        \"onClick:append\": props['onClick:append']\n      }, rootAttrs, inputProps, {\n        \"focused\": isFocused.value,\n        \"messages\": messages.value\n      }), {\n        ...slots,\n        default: _ref2 => {\n          let {\n            id,\n            isDisabled,\n            isDirty,\n            isReadonly,\n            isValid\n          } = _ref2;\n          return _createVNode(VField, _mergeProps({\n            \"ref\": vFieldRef,\n            \"onMousedown\": onControlMousedown,\n            \"onClick\": onControlClick,\n            \"onClick:clear\": onClear,\n            \"onClick:prependInner\": props['onClick:prependInner'],\n            \"onClick:appendInner\": props['onClick:appendInner'],\n            \"role\": \"textbox\"\n          }, fieldProps, {\n            \"id\": id.value,\n            \"active\": isActive.value || isDirty.value,\n            \"dirty\": isDirty.value || props.dirty,\n            \"focused\": isFocused.value,\n            \"error\": isValid.value === false\n          }), {\n            ...slots,\n            default: _ref3 => {\n              let {\n                props: {\n                  class: fieldClass,\n                  ...slotProps\n                }\n              } = _ref3;\n              const inputNode = _withDirectives(_createVNode(\"input\", _mergeProps({\n                \"ref\": inputRef,\n                \"value\": model.value,\n                \"onInput\": onInput,\n                \"autofocus\": props.autofocus,\n                \"readonly\": isReadonly.value,\n                \"disabled\": isDisabled.value,\n                \"name\": props.name,\n                \"placeholder\": props.placeholder,\n                \"size\": 1,\n                \"type\": props.type,\n                \"onFocus\": onFocus,\n                \"onBlur\": blur\n              }, slotProps, inputAttrs), null), [[_resolveDirective(\"intersect\"), {\n                handler: onIntersect\n              }, null, {\n                once: true\n              }]]);\n              return _createVNode(_Fragment, null, [props.prefix && _createVNode(\"span\", {\n                \"class\": \"v-text-field__prefix\"\n              }, [props.prefix]), slots.default ? _createVNode(\"div\", {\n                \"class\": fieldClass,\n                \"data-no-activator\": \"\"\n              }, [slots.default(), inputNode]) : cloneVNode(inputNode, {\n                class: fieldClass\n              }), props.suffix && _createVNode(\"span\", {\n                \"class\": \"v-text-field__suffix\"\n              }, [props.suffix])]);\n            }\n          });\n        },\n        details: hasDetails ? slotProps => _createVNode(_Fragment, null, [slots.details?.(slotProps), hasCounter && _createVNode(_Fragment, null, [_createVNode(\"span\", null, null), _createVNode(VCounter, {\n          \"active\": props.persistentCounter || isFocused.value,\n          \"value\": counterValue.value,\n          \"max\": max.value\n        }, slots.counter)])]) : undefined\n      });\n    });\n    return forwardRefs({}, vInputRef, vFieldRef, inputRef);\n  }\n});\nexport function filterVTextFieldProps(props) {\n  return pick(props, Object.keys(VTextField.props));\n}\n//# sourceMappingURL=VTextField.mjs.map"],"names":["activeTypes","makeVTextFieldProps","propsFactory","makeVInputProps","makeVFieldProps","VTextField","genericComponent","Intersect","focused","val","props","_ref","attrs","emit","slots","model","useProxiedModel","isFocused","focus","blur","useFocus","counterValue","computed","_a","max","onIntersect","isIntersecting","entries","_b","__name","vInputRef","ref","vFieldRef","inputRef","isActive","messages","onFocus","onControlMousedown","e","onControlClick","onClear","nextTick","callEvent","onInput","useRender","hasCounter","hasDetails","rootAttrs","inputAttrs","filterInputAttrs","_","inputProps","filterInputProps","fieldProps","filterFieldProps","_createVNode","VInput","_mergeProps","$event","_ref2","id","isDisabled","isDirty","isReadonly","isValid","VField","_ref3","fieldClass","slotProps","inputNode","_withDirectives","_resolveDirective","_Fragment","cloneVNode","VCounter","forwardRefs","filterVTextFieldProps","pick"],"mappings":"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"}