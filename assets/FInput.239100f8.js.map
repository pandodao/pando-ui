{"version":3,"file":"FInput.239100f8.js","sources":["../../packages/uikit/src/utils/number.ts","../../packages/uikit/src/components/FInput/FInput.tsx"],"sourcesContent":["import { toPrecision } from \"@foxone/utils/number\";\nimport BigNumber from \"bignumber.js\";\n\nexport function numberInput(value: string, precision: number | string) {\n  const str = value.replace(/\\,/g, \".\");\n  const num = new BigNumber(str);\n\n  if (num.isNaN()) {\n    return \"\";\n  }\n\n  const dp = num.decimalPlaces();\n\n  if (dp && dp > +precision) {\n    return toPrecision({ n: value, dp: +precision });\n  }\n\n  return str;\n}\n","import { defineComponent, ref } from \"vue\";\nimport { VTextField } from \"vuetify/components\";\nimport { numberInput } from \"../../utils/number\";\n\nimport \"./FInput.scss\";\n\nexport const FInput = defineComponent({\n  name: \"FInput\",\n\n  props: {\n    modelValue: { type: String, default: \"\" },\n    precision: { type: [Number, String] },\n    isNumber: { type: Boolean, default: false },\n    hideDefaultMessages: Boolean,\n  },\n\n  emits: {\n    \"update:modelValue\": (value) => true,\n  },\n\n  setup(props, { attrs, emit, slots }) {\n    const inputRef = ref<typeof VTextField>();\n    const focused = ref(false);\n    const preset = { density: \"comfortable\" as const };\n\n    const handleChange = (value) => {\n      if (props.isNumber && props.precision) {\n        emit(\"update:modelValue\", numberInput(value, props.precision));\n        inputRef?.value?.$forceUpdate();\n\n        return;\n      }\n\n      emit(\"update:modelValue\", value);\n    };\n\n    const handleKeydown = (e: KeyboardEvent) => {\n      if (props.isNumber) {\n        if ([\"e\", \"+\", \"-\"].includes(e.key)) {\n          e.preventDefault();\n        }\n      }\n    };\n\n    return () => (\n      <VTextField\n        ref={inputRef}\n        v-model:focused={focused.value}\n        class={[\n          \"f-input\",\n          { \"f-input--hide-default-messages\": props.hideDefaultMessages },\n          { \"f-input--focused\": focused.value },\n        ]}\n        modelValue={props.modelValue}\n        onUpdate:modelValue={handleChange}\n        onKeydown={handleKeydown}\n        {...preset}\n      >\n        {{\n          ...slots,\n          details: slots.tools\n            ? (slotProps) => {\n                return (\n                  <div class=\"f-input__tools\">{slots.tools?.(slotProps)}</div>\n                );\n              }\n            : slots.details,\n        }}\n      </VTextField>\n    );\n  },\n});\n"],"names":["numberInput","value","precision","str","num","BigNumber","dp","toPrecision","__name","FInput","defineComponent","name","props","modelValue","type","String","default","Number","isNumber","Boolean","hideDefaultMessages","emits","setup","attrs","emit","slots","inputRef","ref","focused","preset","density","handleChange","$forceUpdate","handleKeydown","e","includes","key","preventDefault","_createVNode","VTextField","_mergeProps","$event","details","tools","slotProps"],"mappings":"mPAGgB,SAAAA,EAAYC,EAAeC,EAA4B,CACrE,MAAMC,EAAMF,EAAM,QAAQ,MAAO,GAAG,EAC9BG,EAAM,IAAIC,EAAUF,CAAG,EAEzB,GAAAC,EAAI,QACC,MAAA,GAGH,MAAAE,EAAKF,EAAI,gBAEX,OAAAE,GAAMA,EAAK,CAACJ,EACPK,EAAY,CAAE,EAAGN,EAAO,GAAI,CAACC,EAAW,EAG1CC,CACT,CAfgBK,EAAAR,EAAA,eCGHS,MAAAA,EAASC,EAAgB,CACpCC,KAAM,SAENC,MAAO,CACLC,WAAY,CAAEC,KAAMC,OAAQC,QAAS,EAAI,EACzCd,UAAW,CAAEY,KAAM,CAACG,OAAQF,MAAM,CAAG,EACrCG,SAAU,CAAEJ,KAAMK,QAASH,QAAS,EAAO,EAC3CI,oBAAqBD,OACtB,EAEDE,MAAO,CACL,oBAAsBpB,GAAU,EACjC,EAEDqB,MAAMV,EAAO,CAAEW,MAAAA,EAAOC,KAAAA,EAAMC,MAAAA,CAAM,EAAG,CACnC,MAAMC,EAAWC,IACXC,EAAUD,EAAI,EAAK,EACnBE,EAAS,CAAEC,QAAS,eAEpBC,EAAgB9B,EAAAA,GAAU,OAC9B,GAAIW,EAAMM,UAAYN,EAAMV,UAAW,CACrCsB,EAAK,oBAAqBxB,EAAYC,EAAOW,EAAMV,SAAS,CAAC,GAC7DwB,EAAAA,GAAAA,YAAAA,EAAUzB,QAAVyB,MAAAA,EAAiBM,eAEjB,MACF,CAEAR,EAAK,oBAAqBvB,CAAK,GARXA,gBAWhBgC,EAAiBC,EAAAA,GAAqB,CACtCtB,EAAMM,UACJ,CAAC,IAAK,IAAK,GAAG,EAAEiB,SAASD,EAAEE,GAAG,GAChCF,EAAEG,eAAc,GAHCH,iBAQvB,MAAO,IAAAI,EAAAC,EAAAC,EAAA,CAAA,IAEEd,EAAQ,QACIE,EAAQ3B,MAAK,mBAAAwC,GAAbb,EAAQ3B,MAAKwC,EAAA,MACvB,CACL,UACA,CAAE,iCAAkC7B,EAAMQ,mBAAoB,EAC9D,CAAE,mBAAoBQ,EAAQ3B,KAAM,CAAC,EACtC,WACWW,EAAMC,WAAU,sBACPkB,EAAY,UACtBE,CAAa,EACpBJ,CAAM,EAAA,CAGR,GAAGJ,EACHiB,QAASjB,EAAMkB,MACVC,GAAc,OACb,OAAAN,EAAA,MAAA,CAAA,MACa,gBAAgB,EAAA,EAAEb,EAAAA,EAAMkB,QAANlB,YAAAA,EAAAA,KAAAA,EAAcmB,EAAU,CAAA,CAExD,EACDnB,EAAMiB,QAGf,CACH,CACF,CAAC"}