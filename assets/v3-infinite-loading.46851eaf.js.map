{"version":3,"file":"v3-infinite-loading.46851eaf.js","sources":["../../node_modules/v3-infinite-loading/lib/v3-infinite-loading.mjs"],"sourcesContent":["import { openBlock as b, createElementBlock as h, pushScopeId as L, popScopeId as $, createElementVNode as a, ref as v, toRefs as w, onMounted as H, onUnmounted as N, renderSlot as u, createVNode as O, createCommentVNode as p, toDisplayString as m, watch as g, nextTick as R } from \"vue\";\nconst E = (e, o) => {\n  const t = e.__vccOpts || e;\n  for (const [n, s] of o)\n    t[n] = s;\n  return t;\n}, C = {}, j = (e) => (L(\"data-v-259be2b2\"), e = e(), $(), e), M = { class: \"container\" }, T = /* @__PURE__ */ j(() => /* @__PURE__ */ a(\"div\", { class: \"spinner\" }, null, -1)), V = [\n  T\n];\nfunction W(e, o) {\n  return b(), h(\"div\", M, V);\n}\nconst D = /* @__PURE__ */ E(C, [[\"render\", W], [\"__scopeId\", \"data-v-259be2b2\"], [\"__file\", \"/home/oumoussa/side-projects/infinite/src/components/Spinner.vue\"]]), U = (e) => ({\n  loading() {\n    e.value = \"loading\";\n  },\n  loaded() {\n    e.value = \"loaded\";\n  },\n  complete() {\n    e.value = \"complete\";\n  },\n  error() {\n    e.value = \"error\";\n  }\n}), z = (e, o, t) => () => {\n  const n = t.parentEl || document.documentElement;\n  t.prevHeight = n.scrollHeight, o.loading(), e(\"infinite\", o);\n}, A = (e, o) => {\n  const t = e.getBoundingClientRect();\n  if (!o)\n    return t.top >= 0 && t.bottom <= window.innerHeight;\n  const n = o.getBoundingClientRect();\n  return t.top >= n.top && t.bottom <= n.bottom;\n}, y = (e) => {\n  e.parentEl = document.querySelector(e.target) || null;\n  let o = `0px 0px ${e.distance}px 0px`;\n  e.top && (o = `${e.distance}px 0px 0px 0px`);\n  const t = new IntersectionObserver(\n    (n) => {\n      n[0].isIntersecting && (e.firstload && e.emit(), e.firstload = !0);\n    },\n    { root: e.parentEl, rootMargin: o }\n  );\n  return t.observe(e.infiniteLoading.value), t;\n};\nconst F = { class: \"state-error\" }, G = {\n  __name: \"InfiniteLoading\",\n  props: {\n    top: { type: Boolean, required: !1 },\n    target: { type: [String, Boolean], required: !1 },\n    distance: { type: Number, required: !1, default: 0 },\n    identifier: { required: !1 },\n    firstload: { type: Boolean, required: !1, default: !0 },\n    slots: { type: Object, required: !1 }\n  },\n  emits: [\"infinite\"],\n  setup(e, { emit: o }) {\n    const t = e;\n    let n = null;\n    const s = v(null), l = v(\"ready\"), { top: f, firstload: x, target: I, distance: S } = t, { identifier: _ } = w(t), i = {\n      infiniteLoading: s,\n      target: I,\n      top: f,\n      firstload: x,\n      distance: S,\n      prevHeight: 0,\n      parentEl: null\n    };\n    i.emit = z(o, U(l), i);\n    const k = () => g(l, async (r) => {\n      const c = i.parentEl || document.documentElement;\n      await R(), r == \"loaded\" && f && (c.scrollTop = c.scrollHeight - i.prevHeight), r == \"loaded\" && A(s.value, i.parentEl) && i.emit(), r == \"complete\" && n.disconnect();\n    }), q = () => g(_, () => {\n      l.value = \"ready\", n.disconnect(), n = y(i);\n    });\n    return H(() => {\n      n = y(i), k(), _ && q();\n    }), N(() => {\n      n.disconnect();\n    }), (r, c) => (b(), h(\"div\", {\n      ref_key: \"infiniteLoading\",\n      ref: s\n    }, [\n      l.value == \"loading\" ? u(r.$slots, \"spinner\", { key: 0 }, () => [\n        O(D)\n      ], !0) : p(\"v-if\", !0),\n      l.value == \"complete\" ? u(r.$slots, \"complete\", { key: 1 }, () => {\n        var d;\n        return [\n          a(\"span\", null, m(((d = e.slots) == null ? void 0 : d.complete) || \"No more results!\"), 1)\n        ];\n      }, !0) : p(\"v-if\", !0),\n      l.value == \"error\" ? u(r.$slots, \"error\", {\n        key: 2,\n        retry: i.emit\n      }, () => {\n        var d;\n        return [\n          a(\"span\", F, [\n            a(\"span\", null, m(((d = e.slots) == null ? void 0 : d.error) || \"Oops something went wrong!\"), 1),\n            a(\"button\", {\n              class: \"retry\",\n              onClick: c[0] || (c[0] = (...B) => i.emit && i.emit(...B))\n            }, \" retry \")\n          ])\n        ];\n      }, !0) : p(\"v-if\", !0)\n    ], 512));\n  }\n}, K = /* @__PURE__ */ E(G, [[\"__scopeId\", \"data-v-9d82030b\"], [\"__file\", \"/home/oumoussa/side-projects/infinite/src/components/InfiniteLoading.vue\"]]);\nexport {\n  K as default\n};\n"],"names":["__name","o","n","s","C","j","L","$","M","T","a","V","W","b","h","D","U","z","A","y","F","G","v","l","x","I","S","_","w","i","k","g","r","c","R","q","H","N","u","O","p","d","m","B","K"],"mappings":"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"}