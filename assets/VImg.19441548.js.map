{"version":3,"file":"VImg.19441548.js","sources":["../../node_modules/vuetify/lib/components/VResponsive/VResponsive.mjs","../../node_modules/vuetify/lib/components/VImg/VImg.mjs"],"sourcesContent":["import { createVNode as _createVNode } from \"vue\";\n// Styles\nimport \"./VResponsive.css\";\n\n// Composables\nimport { makeDimensionProps, useDimension } from \"../../composables/dimensions.mjs\"; // Utilities\nimport { computed } from 'vue';\nimport { defineComponent, useRender } from \"../../util/index.mjs\";\nexport function useAspectStyles(props) {\n  return {\n    aspectStyles: computed(() => {\n      const ratio = Number(props.aspectRatio);\n      return ratio ? {\n        paddingBottom: String(1 / ratio * 100) + '%'\n      } : undefined;\n    })\n  };\n}\nexport const VResponsive = defineComponent({\n  name: 'VResponsive',\n  props: {\n    aspectRatio: [String, Number],\n    contentClass: String,\n    ...makeDimensionProps()\n  },\n  setup(props, _ref) {\n    let {\n      slots\n    } = _ref;\n    const {\n      aspectStyles\n    } = useAspectStyles(props);\n    const {\n      dimensionStyles\n    } = useDimension(props);\n    useRender(() => {\n      var _slots$additional;\n      return _createVNode(\"div\", {\n        \"class\": \"v-responsive\",\n        \"style\": dimensionStyles.value\n      }, [_createVNode(\"div\", {\n        \"class\": \"v-responsive__sizer\",\n        \"style\": aspectStyles.value\n      }, null), (_slots$additional = slots.additional) == null ? void 0 : _slots$additional.call(slots), slots.default && _createVNode(\"div\", {\n        \"class\": ['v-responsive__content', props.contentClass]\n      }, [slots.default()])]);\n    });\n    return {};\n  }\n});\n//# sourceMappingURL=VResponsive.mjs.map","import { withDirectives as _withDirectives, resolveDirective as _resolveDirective, Fragment as _Fragment, createVNode as _createVNode } from \"vue\";\nimport \"./VImg.css\";\n\n// Components\nimport { VResponsive } from \"../VResponsive/index.mjs\"; // Directives\nimport intersect from \"../../directives/intersect/index.mjs\"; // Composables\nimport { makeTransitionProps, MaybeTransition } from \"../../composables/transition.mjs\"; // Utilities\nimport { computed, nextTick, onBeforeMount, ref, vShow, watch, withDirectives } from 'vue';\nimport { convertToUnit, defineComponent, SUPPORTS_INTERSECTION, useRender } from \"../../util/index.mjs\"; // Types\nexport const VImg = defineComponent({\n  name: 'VImg',\n  directives: {\n    intersect\n  },\n  props: {\n    aspectRatio: [String, Number],\n    alt: String,\n    cover: Boolean,\n    eager: Boolean,\n    gradient: String,\n    lazySrc: String,\n    options: {\n      type: Object,\n      // For more information on types, navigate to:\n      // https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API\n      default: () => ({\n        root: undefined,\n        rootMargin: undefined,\n        threshold: undefined\n      })\n    },\n    sizes: String,\n    src: {\n      type: [String, Object],\n      default: ''\n    },\n    srcset: String,\n    width: [String, Number],\n    ...makeTransitionProps()\n  },\n  emits: {\n    loadstart: event => true,\n    load: event => true,\n    error: event => true\n  },\n  setup(props, _ref) {\n    let {\n      emit,\n      slots\n    } = _ref;\n    const currentSrc = ref(''); // Set from srcset\n    const image = ref();\n    const state = ref(props.eager ? 'loading' : 'idle');\n    const naturalWidth = ref();\n    const naturalHeight = ref();\n    const normalisedSrc = computed(() => {\n      return props.src && typeof props.src === 'object' ? {\n        src: props.src.src,\n        srcset: props.srcset || props.src.srcset,\n        lazySrc: props.lazySrc || props.src.lazySrc,\n        aspect: Number(props.aspectRatio || props.src.aspect)\n      } : {\n        src: props.src,\n        srcset: props.srcset,\n        lazySrc: props.lazySrc,\n        aspect: Number(props.aspectRatio || 0)\n      };\n    });\n    const aspectRatio = computed(() => {\n      return normalisedSrc.value.aspect || naturalWidth.value / naturalHeight.value || 0;\n    });\n    watch(() => props.src, () => {\n      init(state.value !== 'idle');\n    });\n    // TODO: getSrc when window width changes\n\n    onBeforeMount(() => init());\n    function init(isIntersecting) {\n      if (props.eager && isIntersecting) return;\n      if (SUPPORTS_INTERSECTION && !isIntersecting && !props.eager) return;\n      state.value = 'loading';\n      if (normalisedSrc.value.lazySrc) {\n        const lazyImg = new Image();\n        lazyImg.src = normalisedSrc.value.lazySrc;\n        pollForSize(lazyImg, null);\n      }\n      if (!normalisedSrc.value.src) return;\n      nextTick(() => {\n        var _image$value, _image$value2;\n        emit('loadstart', ((_image$value = image.value) == null ? void 0 : _image$value.currentSrc) || normalisedSrc.value.src);\n        if ((_image$value2 = image.value) != null && _image$value2.complete) {\n          if (!image.value.naturalWidth) {\n            onError();\n          }\n          if (state.value === 'error') return;\n          if (!aspectRatio.value) pollForSize(image.value, null);\n          onLoad();\n        } else {\n          if (!aspectRatio.value) pollForSize(image.value);\n          getSrc();\n        }\n      });\n    }\n    function onLoad() {\n      var _image$value3;\n      getSrc();\n      state.value = 'loaded';\n      emit('load', ((_image$value3 = image.value) == null ? void 0 : _image$value3.currentSrc) || normalisedSrc.value.src);\n    }\n    function onError() {\n      var _image$value4;\n      state.value = 'error';\n      emit('error', ((_image$value4 = image.value) == null ? void 0 : _image$value4.currentSrc) || normalisedSrc.value.src);\n    }\n    function getSrc() {\n      const img = image.value;\n      if (img) currentSrc.value = img.currentSrc || img.src;\n    }\n    function pollForSize(img) {\n      let timeout = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 100;\n      const poll = () => {\n        const {\n          naturalHeight: imgHeight,\n          naturalWidth: imgWidth\n        } = img;\n        if (imgHeight || imgWidth) {\n          naturalWidth.value = imgWidth;\n          naturalHeight.value = imgHeight;\n        } else if (!img.complete && state.value === 'loading' && timeout != null) {\n          setTimeout(poll, timeout);\n        } else if (img.currentSrc.endsWith('.svg') || img.currentSrc.startsWith('data:image/svg+xml')) {\n          naturalWidth.value = 1;\n          naturalHeight.value = 1;\n        }\n      };\n      poll();\n    }\n    const containClasses = computed(() => ({\n      'v-img__img--cover': props.cover,\n      'v-img__img--contain': !props.cover\n    }));\n    const __image = () => {\n      var _slots$sources;\n      if (!normalisedSrc.value.src || state.value === 'idle') return null;\n      const img = _createVNode(\"img\", {\n        \"class\": ['v-img__img', containClasses.value],\n        \"src\": normalisedSrc.value.src,\n        \"srcset\": normalisedSrc.value.srcset,\n        \"alt\": \"\",\n        \"sizes\": props.sizes,\n        \"ref\": image,\n        \"onLoad\": onLoad,\n        \"onError\": onError\n      }, null);\n      const sources = (_slots$sources = slots.sources) == null ? void 0 : _slots$sources.call(slots);\n      return _createVNode(MaybeTransition, {\n        \"transition\": props.transition,\n        \"appear\": true\n      }, {\n        default: () => [withDirectives(sources ? _createVNode(\"picture\", {\n          \"class\": \"v-img__picture\"\n        }, [sources, img]) : img, [[vShow, state.value === 'loaded']])]\n      });\n    };\n    const __preloadImage = () => _createVNode(MaybeTransition, {\n      \"transition\": props.transition\n    }, {\n      default: () => [normalisedSrc.value.lazySrc && state.value !== 'loaded' && _createVNode(\"img\", {\n        \"class\": ['v-img__img', 'v-img__img--preload', containClasses.value],\n        \"src\": normalisedSrc.value.lazySrc,\n        \"alt\": \"\"\n      }, null)]\n    });\n    const __placeholder = () => {\n      if (!slots.placeholder) return null;\n      return _createVNode(MaybeTransition, {\n        \"transition\": props.transition,\n        \"appear\": true\n      }, {\n        default: () => [(state.value === 'loading' || state.value === 'error' && !slots.error) && _createVNode(\"div\", {\n          \"class\": \"v-img__placeholder\"\n        }, [slots.placeholder()])]\n      });\n    };\n    const __error = () => {\n      if (!slots.error) return null;\n      return _createVNode(MaybeTransition, {\n        \"transition\": props.transition,\n        \"appear\": true\n      }, {\n        default: () => [state.value === 'error' && _createVNode(\"div\", {\n          \"class\": \"v-img__error\"\n        }, [slots.error()])]\n      });\n    };\n    const __gradient = () => {\n      if (!props.gradient) return null;\n      return _createVNode(\"div\", {\n        \"class\": \"v-img__gradient\",\n        \"style\": {\n          backgroundImage: `linear-gradient(${props.gradient})`\n        }\n      }, null);\n    };\n    const isBooted = ref(false);\n    {\n      const stop = watch(aspectRatio, val => {\n        if (val) {\n          // Doesn't work with nextTick, idk why\n          requestAnimationFrame(() => {\n            requestAnimationFrame(() => {\n              isBooted.value = true;\n            });\n          });\n          stop();\n        }\n      });\n    }\n    useRender(() => _withDirectives(_createVNode(VResponsive, {\n      \"class\": ['v-img', {\n        'v-img--booting': !isBooted.value\n      }],\n      \"style\": {\n        width: convertToUnit(props.width === 'auto' ? naturalWidth.value : props.width)\n      },\n      \"aspectRatio\": aspectRatio.value,\n      \"aria-label\": props.alt,\n      \"role\": props.alt ? 'img' : undefined\n    }, {\n      additional: () => _createVNode(_Fragment, null, [_createVNode(__image, null, null), _createVNode(__preloadImage, null, null), _createVNode(__gradient, null, null), _createVNode(__placeholder, null, null), _createVNode(__error, null, null)]),\n      default: slots.default\n    }), [[_resolveDirective(\"intersect\"), {\n      handler: init,\n      options: props.options\n    }, null, {\n      once: true\n    }]]));\n    return {\n      currentSrc,\n      image,\n      state,\n      naturalWidth,\n      naturalHeight\n    };\n  }\n});\n//# sourceMappingURL=VImg.mjs.map"],"names":["useAspectStyles","props","computed","ratio","__name","VResponsive","defineComponent","makeDimensionProps","_ref","slots","aspectStyles","dimensionStyles","useDimension","useRender","_slots$additional","_createVNode","VImg","intersect","makeTransitionProps","event","emit","currentSrc","ref","image","state","naturalWidth","naturalHeight","normalisedSrc","aspectRatio","watch","init","onBeforeMount","isIntersecting","SUPPORTS_INTERSECTION","lazyImg","pollForSize","nextTick","_image$value","_image$value2","onError","onLoad","getSrc","_image$value3","_image$value4","img","timeout","poll","imgHeight","imgWidth","containClasses","__image","_slots$sources","sources","MaybeTransition","withDirectives","vShow","__preloadImage","__placeholder","__error","__gradient","isBooted","stop","val","_withDirectives","convertToUnit","_Fragment","_resolveDirective"],"mappings":"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"}